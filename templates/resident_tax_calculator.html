{% extends "layout.html" %}

{% block title %}Resident Tax Calculator{% endblock %}

{% block content %}
    <a href="{{ url_for('home') }}" class="nav-back">â† Back to Home</a>
    
    <div style="text-align: center;">
      <div class="lang-toggle">
        <button id="btn-en" class="active" onclick="toggleLanguage('en')">EN</button>
        <button id="btn-jp" onclick="toggleLanguage('jp')">JP</button>
        <button id="btn-mm" onclick="toggleLanguage('mm')">MM</button>
      </div>
    </div>

    <h1 id="main-title">Resident Tax Calculator</h1>
    <p class="subtitle" id="subtitle">A simple and visual breakdown of your Japanese resident tax components.</p>

    <!-- ... (The entire top part of the calculator remains the same) ... -->
    <div class="input-grid">
      <div class="form-group">
        <label for="input-mode" id="label-input-type">Select Input Type:</label>
        <select id="input-mode" onchange="updateInputMode()">
          <option value="monthly" id="option-monthly">Monthly Gross Salary</option>
          <option value="annual" id="option-annual">Annual Gross Salary</option>
        </select>
      </div>
    </div>
    <div class="input-grid">
        <div id="monthly-group"><div class="form-group"><div class="label-with-icon"><label for="monthly" id="label-monthly">Monthly Gross Salary (Â¥)</label></div><input type="number" id="monthly" oninput="syncSalaries('monthly')" placeholder="e.g., 300000"></div></div>
        <div id="annual-group" style="display:none;"><div class="form-group"><div class="label-with-icon"><label for="annual" id="label-annual">Annual Gross Salary (Â¥)</label></div><input type="number" id="annual" oninput="syncSalaries('annual')" placeholder="e.g., 3600000"></div></div>
    </div>
    <hr>
    <div class="results-grid">
      <div class="form-group"><div class="label-with-icon"><label for="result-annual" id="label-calc-annual">Calculated Annual Salary</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-calc-annual">...</span></div><input type="text" id="result-annual" readonly></div>
      <div class="form-group"><div class="label-with-icon"><span class="icon deduction-icon">ğŸ”»</span><label for="result-deduction" id="label-deduction">Salary Income Deduction</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-deduction">...</span></div><input type="text" id="result-deduction" readonly></div>
      <div class="form-group"><div class="label-with-icon"><span class="icon deduction-icon">ğŸ”»</span><label for="social-insurance" id="label-insurance">Social Insurance Premiums</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-insurance">...</span></div><input type="text" id="social-insurance" oninput="updateTaxableIncome()"></div>
      <div class="form-group"><div class="label-with-icon"><span class="icon deduction-icon">ğŸ”»</span><label for="basic-deduction" id="label-basic-deduction">Basic Deduction</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-basic-deduction">...</span></div><input type="text" id="basic-deduction" readonly></div>
    </div>
    <div class="form-group"><div class="label-with-icon"><span class="icon result-icon">ğŸ’¡</span><label for="taxable-income" id="label-taxable">Taxable Income</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-taxable">...</span></div><input type="text" id="taxable-income" readonly></div>
    <div class="results-grid">
      <div class="form-group"><div class="label-with-icon"><span class="icon result-icon">ğŸ’°</span><label for="income-tax" id="label-income-tax">Income-based Resident Tax (10%)</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-income-tax">...</span></div><input type="text" id="income-tax" readonly></div>
      <div class="form-group"><div class="label-with-icon"><span class="icon result-icon">ğŸ™ï¸</span><label for="per-capita" id="label-per-capita">Per Capita Resident Tax</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-per-capita">...</span></div><input type="text" id="per-capita" readonly></div>
    </div>
    <div class="form-group"><div class="label-with-icon"><span class="icon result-icon">ğŸ§¾</span><label for="total-resident-tax" id="label-total-tax">Total Estimated Annual Resident Tax</label><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-total-tax">...</span></div><input type="text" id="total-resident-tax" readonly style="font-size: 20px; text-align: center; color: var(--success-color);"></div>
    <hr>
    <div class="form-group">
      <div class="label-with-icon"><h2 id="monthly-schedule-title" style="font-size: 1.2em; font-weight: 500; color: var(--label-color); margin: 0;">Monthly Payment Schedule (June - May)</h2><i class="info-icon">i</i><span class="tooltiptext" id="tooltip-monthly-schedule">...</span></div>
    </div>
    <div class="monthly-payment-grid">
      <div class="form-group"><label for="payment-jun" id="label-jun">June</label><input type="text" id="payment-jun" readonly></div>
      <div class="form-group"><label for="payment-jul" id="label-jul">July</label><input type="text" id="payment-jul" readonly></div>
      <div class="form-group"><label for="payment-aug" id="label-aug">August</label><input type="text" id="payment-aug" readonly></div>
      <div class="form-group"><label for="payment-sep" id="label-sep">September</label><input type="text" id="payment-sep" readonly></div>
      <div class="form-group"><label for="payment-oct" id="label-oct">October</label><input type="text" id="payment-oct" readonly></div>
      <div class="form-group"><label for="payment-nov" id="label-nov">November</label><input type="text" id="payment-nov" readonly></div>
      <div class="form-group"><label for="payment-dec" id="label-dec">December</label><input type="text" id="payment-dec" readonly></div>
      <div class="form-group"><label for="payment-jan" id="label-jan">January</label><input type="text" id="payment-jan" readonly></div>
      <div class="form-group"><label for="payment-feb" id="label-feb">February</label><input type="text" id="payment-feb" readonly></div>
      <div class="form-group"><label for="payment-mar" id="label-mar">March</label><input type="text" id="payment-mar" readonly></div>
      <div class="form-group"><label for="payment-apr" id="label-apr">April</label><input type="text" id="payment-apr" readonly></div>
      <div class="form-group"><label for="payment-may" id="label-may">May</label><input type="text" id="payment-may" readonly></div>
    </div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {

      const translations = {
        en: {
          'main-title': 'Resident Tax Calculator', 'subtitle': 'A simple and visual breakdown of your Japanese resident tax components.', 'label-input-type': 'Select Input Type:', 'option-monthly': 'Monthly Gross Salary', 'option-annual': 'Annual Gross Salary', 'label-monthly': 'Monthly Gross Salary (Â¥)', 'label-annual': 'Annual Gross Salary (Â¥)', 'label-calc-annual': 'Calculated Annual Salary', 'tooltip-calc-annual': 'This is your total gross annual salary, used as the starting point for all calculations.', 'label-deduction': 'Salary Income Deduction', 'tooltip-deduction': 'A standard deduction provided to all salaried employees. The amount depends on your income level.', 'label-insurance': 'Social Insurance Premiums', 'tooltip-insurance': 'Estimated at ~15% of gross income (health, pension, etc.). You can edit this for a more accurate value.', 'label-basic-deduction': 'Basic Deduction', 'tooltip-basic-deduction': 'A fixed deduction of Â¥430,000 applicable to most residents for residence tax calculation.', 'label-taxable': 'Taxable Income', 'tooltip-taxable': 'This is the final amount your tax is calculated on. (Annual Salary - All Deductions).', 'label-income-tax': 'Income-based Resident Tax (10%)', 'tooltip-income-tax': 'Calculated as 10% of your taxable income (6% for municipal, 4% for prefectural).', 'label-per-capita': 'Per Capita Resident Tax', 'tooltip-per-capita': 'A small, fixed annual amount. Typically around Â¥5,000.', 'label-total-tax': 'Total Estimated Annual Resident Tax', 'tooltip-total-tax': "The total amount of resident tax you'll likely pay for the year. (Income-based + Per Capita).", 'monthly-schedule-title': 'Monthly Payment Schedule (June - May)', 'tooltip-monthly-schedule': 'Resident tax is paid in 12 installments from June to May of the following year. The first payment may be slightly higher to account for rounding.', 'label-jun': 'June', 'label-jul': 'July', 'label-aug': 'August', 'label-sep': 'September', 'label-oct': 'October', 'label-nov': 'November', 'label-dec': 'December', 'label-jan': 'January', 'label-feb': 'February', 'label-mar': 'March', 'label-apr': 'April', 'label-may': 'May'
        },
        jp: {
          'main-title': 'ä½æ°‘ç¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼', 'subtitle': 'æ—¥æœ¬ã®ç¨é‡‘ã®ä»•çµ„ã¿ã‚’åˆ†ã‹ã‚Šã‚„ã™ãå¯è¦–åŒ–ã—ã¾ã™ã€‚', 'label-input-type': 'å…¥åŠ›ã‚¿ã‚¤ãƒ—ã®é¸æŠ:', 'option-monthly': 'æœˆåï¼ˆã‚°ãƒ­ã‚¹ï¼‰', 'option-annual': 'å¹´åï¼ˆã‚°ãƒ­ã‚¹ï¼‰', 'label-monthly': 'æœˆåï¼ˆã‚°ãƒ­ã‚¹ï¼‰(å††)', 'label-annual': 'å¹´åï¼ˆã‚°ãƒ­ã‚¹ï¼‰(å††)', 'label-calc-annual': 'è¨ˆç®—å¾Œã®å¹´å', 'tooltip-calc-annual': 'è¨ˆç®—ã®åŸºç‚¹ã¨ãªã‚‹ã€ç¨å¼•å‰ã®å¹´é–“ç·æ”¯çµ¦é¡ã§ã™ã€‚', 'label-deduction': 'çµ¦ä¸æ‰€å¾—æ§é™¤', 'tooltip-deduction': 'çµ¦ä¸æ‰€å¾—è€…ã«é©ç”¨ã•ã‚Œã‚‹æ¨™æº–çš„ãªæ§é™¤ã§ã™ã€‚é‡‘é¡ã¯åå…¥ã«å¿œã˜ã¦å¤‰å‹•ã—ã¾ã™ã€‚', 'label-insurance': 'ç¤¾ä¼šä¿é™ºæ–™æ§é™¤', 'tooltip-insurance': 'å¹´åã®ç´„15%ã¨æ¨å®šï¼ˆå¥åº·ä¿é™ºã€å¹´é‡‘ç­‰ï¼‰ã€‚ã‚ˆã‚Šæ­£ç¢ºãªå€¤ã«ç·¨é›†å¯èƒ½ã§ã™ã€‚', 'label-basic-deduction': 'åŸºç¤æ§é™¤', 'tooltip-basic-deduction': 'ä½æ°‘ç¨è¨ˆç®—ã«ãŠã„ã¦ã€ã»ã¨ã‚“ã©ã®å±…ä½è€…ã«é©ç”¨ã•ã‚Œã‚‹43ä¸‡å††ã®å®šé¡æ§é™¤ã§ã™ã€‚', 'label-taxable': 'èª²ç¨æ‰€å¾—é‡‘é¡', 'tooltip-taxable': 'ç¨é‡‘ãŒè¨ˆç®—ã•ã‚Œã‚‹æœ€çµ‚çš„ãªé‡‘é¡ã§ã™ã€‚(å¹´å - å…¨ã¦ã®æ§é™¤)ã€‚', 'label-income-tax': 'æ‰€å¾—å‰² (10%)', 'tooltip-income-tax': 'èª²ç¨æ‰€å¾—ã®10%ã§è¨ˆç®—ã•ã‚Œã¾ã™ (å¸‚ç”ºæ‘æ°‘ç¨6% + éƒ½é“åºœçœŒæ°‘ç¨4%)ã€‚', 'label-per-capita': 'å‡ç­‰å‰²', 'tooltip-per-capita': 'å®šé¡ã§èª²ã•ã‚Œã‚‹å°‘é¡ã®å¹´ç¨ã€‚é€šå¸¸5,000å††ç¨‹åº¦ã§ã™ã€‚', 'label-total-tax': 'ä½æ°‘ç¨ã®å¹´é–“åˆè¨ˆï¼ˆç›®å®‰ï¼‰', 'tooltip-total-tax': 'å¹´é–“ã«æ”¯æ‰•ã†ä½æ°‘ç¨ã®åˆè¨ˆé¡ã§ã™ã€‚(æ‰€å¾—å‰² + å‡ç­‰å‰²)ã€‚', 'monthly-schedule-title': 'æœˆã€…ã®æ”¯æ‰•é¡ï¼ˆ6æœˆã€œç¿Œå¹´5æœˆï¼‰', 'tooltip-monthly-schedule': 'ä½æ°‘ç¨ã¯ã€6æœˆã‹ã‚‰ç¿Œå¹´5æœˆã¾ã§ã®12å›ã«åˆ†ã‘ã¦æ”¯æ‰•ã„ã¾ã™ã€‚åˆå›ã®æ”¯æ‰•é¡ã¯ç«¯æ•°èª¿æ•´ã®ãŸã‚è‹¥å¹²é«˜ããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚', 'label-jun': '6æœˆ', 'label-jul': '7æœˆ', 'label-aug': '8æœˆ', 'label-sep': '9æœˆ', 'label-oct': '10æœˆ', 'label-nov': '11æœˆ', 'label-dec': '12æœˆ', 'label-jan': '1æœˆ', 'label-feb': '2æœˆ', 'label-mar': '3æœˆ', 'label-apr': '4æœˆ', 'label-may': '5æœˆ'
        },
        // START: NEW MYANMAR TRANSLATIONS
        mm: {
          'main-title': 'á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€º/á€’á€±á€á€á€¶á€á€½á€”á€º á€á€½á€€á€ºá€á€»á€€á€ºá€™á€¾á€¯á€…á€”á€…á€º',
          'subtitle': 'á€á€„á€ºáá€‚á€»á€•á€”á€ºá€”á€­á€¯á€„á€ºá€„á€¶ á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€º á€¡á€…á€­á€á€ºá€¡á€•á€­á€¯á€„á€ºá€¸á€™á€»á€¬á€¸á€€á€­á€¯ á€›á€­á€¯á€¸á€›á€¾á€„á€ºá€¸á€…á€½á€¬ á€›á€¾á€„á€ºá€¸á€œá€„á€ºá€¸á€–á€±á€¬á€ºá€•á€¼á€‘á€¬á€¸á€•á€«á€á€Šá€ºá‹',
          'label-input-type': 'á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€™á€¾á€¯á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸ á€›á€½á€±á€¸á€á€»á€šá€ºá€•á€«:',
          'option-monthly': 'á€œá€…á€‰á€º á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€œá€…á€¬',
          'option-annual': 'á€”á€¾á€…á€ºá€…á€‰á€º á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€œá€…á€¬',
          'label-monthly': 'á€œá€…á€‰á€º á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€œá€…á€¬ (Â¥)',
          'label-annual': 'á€”á€¾á€…á€ºá€…á€‰á€º á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€œá€…á€¬ (Â¥)',
          'label-calc-annual': 'á€á€½á€€á€ºá€á€»á€€á€ºá€‘á€¬á€¸á€á€±á€¬ á€”á€¾á€…á€ºá€…á€‰á€ºá€œá€…á€¬',
          'tooltip-calc-annual': 'á€¤á€á€Šá€ºá€™á€¾á€¬ á€á€½á€€á€ºá€á€»á€€á€ºá€™á€¾á€¯á€¡á€¬á€¸á€œá€¯á€¶á€¸á€¡á€á€½á€€á€º á€¡á€…á€•á€¼á€¯á€á€Šá€·á€º á€á€„á€ºáá€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€”á€¾á€…á€ºá€…á€‰á€ºá€œá€…á€¬á€–á€¼á€…á€ºá€á€Šá€ºá‹',
          'label-deduction': 'á€œá€…á€¬á€á€„á€ºá€„á€½á€± á€”á€¾á€¯á€á€ºá€šá€°á€„á€½á€±',
          'tooltip-deduction': 'á€œá€…á€¬á€…á€¬á€¸á€á€”á€ºá€‘á€™á€ºá€¸á€¡á€¬á€¸á€œá€¯á€¶á€¸á€¡á€á€½á€€á€º á€•á€¯á€¶á€á€±á€”á€¾á€¯á€á€ºá€šá€°á€„á€½á€±á€–á€¼á€…á€ºá€á€Šá€ºá‹ á€•á€™á€¬á€á€á€Šá€º á€á€„á€ºáá€á€„á€ºá€„á€½á€±á€¡á€†á€„á€·á€ºá€•á€±á€«á€º á€™á€°á€á€Šá€ºá€á€Šá€ºá‹',
          'label-insurance': 'á€œá€°á€™á€¾á€¯á€–á€°á€œá€¯á€¶á€›á€±á€¸ á€¡á€¬á€™á€á€¶ á€•á€›á€®á€™á€®á€šá€¶á€™á€»á€¬á€¸',
          'tooltip-insurance': 'á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€á€„á€ºá€„á€½á€±á áá…% á€á€”á€·á€ºá€™á€¾á€”á€ºá€¸á€‘á€¬á€¸á€á€Šá€º (á€€á€»á€”á€ºá€¸á€™á€¬á€›á€±á€¸áŠ á€•á€„á€ºá€…á€„á€º á€…á€á€Šá€º)á‹ á€•á€­á€¯á€™á€­á€¯á€á€­á€€á€»á€á€±á€¬á€á€”á€ºá€–á€­á€¯á€¸á€¡á€á€½á€€á€º á€á€Šá€ºá€¸á€–á€¼á€á€ºá€”á€­á€¯á€„á€ºá€á€Šá€ºá‹',
          'label-basic-deduction': 'á€¡á€á€¼á€±á€á€¶ á€”á€¾á€¯á€á€ºá€šá€°á€„á€½á€±',
          'tooltip-basic-deduction': 'á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€ºá€á€½á€€á€ºá€á€»á€€á€ºá€›á€¬á€á€½á€„á€º á€”á€±á€‘á€­á€¯á€„á€ºá€á€°á€¡á€™á€»á€¬á€¸á€…á€¯á€¡á€á€½á€€á€º á€á€á€ºá€™á€¾á€á€ºá€‘á€¬á€¸á€á€±á€¬ á€šá€”á€ºá€¸ á„áƒá€,á€á€á€ á€”á€¾á€¯á€á€ºá€šá€°á€„á€½á€±á€–á€¼á€…á€ºá€á€Šá€ºá‹',
          'label-taxable': 'á€¡á€á€½á€”á€ºá€†á€±á€¬á€„á€ºá€›á€”á€ºá€á€„á€ºá€„á€½á€±',
          'tooltip-taxable': 'á€¤á€á€Šá€ºá€™á€¾á€¬ á€á€„á€ºáá€¡á€á€½á€”á€ºá€€á€­á€¯ á€á€½á€€á€ºá€á€»á€€á€ºá€™á€Šá€·á€º á€”á€±á€¬á€€á€ºá€†á€¯á€¶á€¸á€•á€™á€¬á€á€–á€¼á€…á€ºá€á€Šá€ºá‹ (á€”á€¾á€…á€ºá€…á€‰á€ºá€á€„á€ºá€„á€½á€± - á€”á€¾á€¯á€á€ºá€šá€°á€„á€½á€±á€¡á€¬á€¸á€œá€¯á€¶á€¸)á‹',
          'label-income-tax': 'á€á€„á€ºá€„á€½á€±á€¡á€•á€±á€«á€ºá€¡á€á€¼á€±á€á€¶á€á€±á€¬ á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€º (áá€%)',
          'tooltip-income-tax': 'á€á€„á€ºáá€¡á€á€½á€”á€ºá€†á€±á€¬á€„á€ºá€›á€”á€ºá€á€„á€ºá€„á€½á€±á áá€% á€–á€¼á€„á€·á€º á€á€½á€€á€ºá€á€»á€€á€ºá€á€Šá€ºá‹ (á€™á€¼á€­á€¯á€·á€”á€šá€º á†% + á€á€›á€­á€¯á€„á€º á„%)á‹',
          'label-per-capita': 'á€œá€°á€á€…á€ºá€¦á€¸á€á€»á€„á€ºá€¸á€…á€®á€¡á€á€½á€€á€º á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€º',
          'tooltip-per-capita': 'á€”á€¾á€…á€ºá€…á€‰á€ºá€á€á€ºá€™á€¾á€á€ºá€‘á€¬á€¸á€á€±á€¬ á€•á€™á€¬á€á€¡á€”á€Šá€ºá€¸á€„á€šá€ºá‹ á€•á€¯á€¶á€™á€¾á€”á€ºá€¡á€¬á€¸á€–á€¼á€„á€·á€º á€šá€”á€ºá€¸ á…,á€á€á€ á€á€”á€ºá€¸á€€á€»á€„á€ºá€–á€¼á€…á€ºá€á€Šá€ºá‹',
          'label-total-tax': 'á€”á€¾á€…á€ºá€…á€‰á€º á€á€”á€·á€ºá€™á€¾á€”á€ºá€¸ á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€º á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸',
          'tooltip-total-tax': 'á€á€…á€ºá€”á€¾á€…á€ºá€¡á€á€½á€€á€º á€á€„á€ºá€•á€±á€¸á€†á€±á€¬á€„á€ºá€›á€™á€Šá€·á€º á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€º á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€•á€™á€¬á€á‹ (á€á€„á€ºá€„á€½á€±á€¡á€•á€±á€«á€ºá€¡á€á€¼á€±á€á€¶á€á€±á€¬ + á€œá€°á€á€…á€ºá€¦á€¸á€á€»á€„á€ºá€¸á€…á€®á€¡á€á€½á€€á€º)á‹',
          'monthly-schedule-title': 'á€œá€…á€‰á€º á€•á€±á€¸á€á€»á€±á€™á€¾á€¯á€¡á€á€»á€­á€”á€ºá€‡á€šá€¬á€¸ (á€‡á€½á€”á€º - á€™á€±)',
          'tooltip-monthly-schedule': 'á€™á€¼á€­á€¯á€·á€”á€šá€ºá€á€½á€”á€ºá€€á€­á€¯ á€”á€±á€¬á€€á€ºá€”á€¾á€…á€º á€‡á€½á€”á€ºá€œá€™á€¾ á€™á€±á€œá€¡á€‘á€­ áá‚ á€œá€á€½á€²á á€•á€±á€¸á€†á€±á€¬á€„á€ºá€›á€á€Šá€ºá‹ á€•á€‘á€™á€œá€•á€±á€¸á€á€»á€±á€™á€¾á€¯á€á€Šá€º á€¡á€á€­á€¯á€„á€ºá€¸á€Šá€¾á€­á€›á€”á€ºá€¡á€á€½á€€á€º á€¡á€”á€Šá€ºá€¸á€„á€šá€ºá€•á€­á€¯á€™á€»á€¬á€¸á€”á€­á€¯á€„á€ºá€á€Šá€ºá‹',
          'label-jun': 'á€‡á€½á€”á€ºá€œ', 'label-jul': 'á€‡á€°á€œá€­á€¯á€„á€ºá€œ', 'label-aug': 'á€©á€‚á€¯á€á€ºá€œ', 'label-sep': 'á€…á€€á€ºá€á€„á€ºá€˜á€¬á€œ', 'label-oct': 'á€¡á€±á€¬á€€á€ºá€á€­á€¯á€˜á€¬á€œ', 'label-nov': 'á€”á€­á€¯á€á€„á€ºá€˜á€¬á€œ', 'label-dec': 'á€’á€®á€‡á€„á€ºá€˜á€¬á€œ', 'label-jan': 'á€‡á€”á€ºá€”á€á€«á€›á€®á€œ', 'label-feb': 'á€–á€±á€–á€±á€¬á€ºá€á€«á€›á€®á€œ', 'label-mar': 'á€™á€á€ºá€œ', 'label-apr': 'á€§á€•á€¼á€®á€œ', 'label-may': 'á€™á€±á€œ'
        }
        // END: NEW MYANMAR TRANSLATIONS
      };
      
      const monthIds = ['jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec', 'jan', 'feb', 'mar', 'apr', 'may'];
      window.toggleLanguage = function(lang) {for (const id in translations[lang]) {const element = document.getElementById(id); if (element) {element.innerHTML = translations[lang][id];}} document.querySelectorAll('.lang-toggle button').forEach(btn => btn.classList.remove('active')); document.getElementById(`btn-${lang}`).classList.add('active');};
      window.updateInputMode = function() {const mode = document.getElementById("input-mode").value; document.getElementById("monthly-group").style.display = (mode === 'monthly') ? 'block' : 'none'; document.getElementById("annual-group").style.display = (mode === 'annual') ? 'block' : 'none'; if (mode === 'monthly') {document.getElementById("annual-group").style.gridColumn = 'auto'; document.getElementById("monthly-group").style.gridColumn = '1 / -1';} else {document.getElementById("monthly-group").style.gridColumn = 'auto'; document.getElementById("annual-group").style.gridColumn = '1 / -1';} syncSalaries(mode);};
      window.syncSalaries = function(source) {let monthly = parseInt(document.getElementById("monthly").value) || 0; let annual = parseInt(document.getElementById("annual").value) || 0; if (source === 'monthly') {annual = monthly * 12; document.getElementById("annual").value = annual > 0 ? annual : '';} else if (source === 'annual') {monthly = Math.round(annual / 12); document.getElementById("monthly").value = monthly > 0 ? monthly : '';} if (annual === 0) { clearFields(); return; } let deduction = 0; if (annual <= 1625000) { deduction = 550000; } else if (annual <= 1800000) { deduction = annual * 0.4 - 100000; } else if (annual <= 3600000) { deduction = annual * 0.3 + 80000; } else if (annual <= 6600000) { deduction = annual * 0.2 + 440000; } else if (annual <= 8500000) { deduction = annual * 0.1 + 1100000; } else { deduction = 1950000; } deduction = Math.round(deduction); const basicDeduction = 430000; const estimatedInsurance = Math.round(annual * 0.15); document.getElementById("social-insurance").value = estimatedInsurance.toLocaleString(); document.getElementById("result-annual").value = `Â¥ ${annual.toLocaleString()}`; document.getElementById("result-deduction").value = `Â¥ ${deduction.toLocaleString()}`; document.getElementById("basic-deduction").value = `Â¥ ${basicDeduction.toLocaleString()}`; updateTaxableIncome();};
      window.updateTaxableIncome = function() {
        let annual = parseInt(document.getElementById("annual").value.replace(/,/g, "")) || 0; if (annual === 0) return;
        let salaryDeduction = parseInt(document.getElementById("result-deduction").value.replace(/[Â¥, ]/g, "")) || 0; let insurance = parseInt(document.getElementById("social-insurance").value.replace(/[Â¥, ]/g, "")) || 0; let basic = parseInt(document.getElementById("basic-deduction").value.replace(/[Â¥, ]/g, "")) || 0;
        const taxable = Math.max(0, annual - salaryDeduction - insurance - basic); const incomeBasedTax = Math.round(taxable * 0.1); const perCapitaTax = 5000; const totalResidentTax = incomeBasedTax + perCapitaTax;
        document.getElementById("taxable-income").value = `Â¥ ${taxable.toLocaleString()}`; document.getElementById("income-tax").value = `Â¥ ${incomeBasedTax.toLocaleString()}`; document.getElementById("per-capita").value = `Â¥ ${perCapitaTax.toLocaleString()}`; document.getElementById("total-resident-tax").value = `Â¥ ${totalResidentTax.toLocaleString()}`;
        if (totalResidentTax > 0) { const baseMonthlyPayment = Math.floor(totalResidentTax / 12); const firstMonthPayment = totalResidentTax - (baseMonthlyPayment * 11); document.getElementById('payment-jun').value = `Â¥ ${firstMonthPayment.toLocaleString()}`; monthIds.slice(1).forEach(month => { document.getElementById(`payment-${month}`).value = `Â¥ ${baseMonthlyPayment.toLocaleString()}`; });
        } else { monthIds.forEach(month => { document.getElementById(`payment-${month}`).value = ''; }); }
      };
      function clearFields() { const ids = ["result-annual", "result-deduction", "social-insurance", "basic-deduction", "taxable-income", "income-tax", "per-capita", "total-resident-tax"]; ids.forEach(id => document.getElementById(id).value = ''); monthIds.forEach(month => { document.getElementById(`payment-${month}`).value = ''; }); }
      updateInputMode();
    });
</script>
{% endblock %}